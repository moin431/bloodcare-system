<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel | BloodCare</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>

<div class="dashboard d-flex">

    <!-- SIDEBAR -->
    <div class="sidebar p-4">
        <a class="navbar-brand d-flex align-items-center " href="#">
            <img src="https://www.octapharmaplasma.com/wp-content/uploads/2025/03/Plasma-vs-platelets-1.png" class="rounded" alt="BloodCare Logo">
            <span class="ms-2 fw-bold text-danger logo-text">BloodCare</span>
        </a>

        <a class="active" href="/admin-dashboard">Dashboard</a>
        <a href="/donors">Manage Donors</a>
        <a href="/requests">Blood Requests</a>
        <a href="/stocks">Blood Stock</a>
        <a href="/reports">Reports</a>
        <a href="/logout" class="mt-4 text-white border white">Logout</a>
    </div>

    <!-- MAIN -->
    <div class="flex-grow-1 p-4">

        <!-- HEADER -->
        <div class="admin-header">
            <h3 class="fw-bold">Admin Dashboard</h3>
            <span class="badge bg-danger">Hospital Panel</span>
        </div>

        <!-- STATS -->
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="stat-admin">
                    <p class="text-muted">Total Donors</p>
                    <h3 th:text="${totalDonors}"></h3>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat-admin">
                    <p class="text-muted">Pending Requests</p>
                    <h3 th:text="${pendingRequests}"></h3>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat-admin">
                    <p class="text-muted">Blood Units</p>
                    <h3 th:text="${bloodUnits}"></h3>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat-admin">
                    <p class="text-muted">Monthly Donations</p>
                    <h3>142</h3>
                </div>
            </div>
        </div>

        <!-- MANAGE DONORS -->
        <div class="table-card mb-4">
            <h5 class="fw-bold mb-3">Manage Donors</h5>
            <table class="table align-middle">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Blood Group</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="donor : ${donors}">
                    <td th:text="${donor.name}"></td>
                    <td th:text="${donor.bloodGroup}"></td>
                    <td>
                       <span th:if="${donor.status == 'ACTIVE'}"
                                class="badge badge-success">Active
                       </span>

                        <span th:if="${donor.status == 'BLOCKED'}"
                                class="badge badge-danger">Blocked
                        </span>
                    </td>
                    <td class="table-actions">
                        <button class="btn btn-sm btn-danger" onclick="blockUser()">Block</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- BLOOD REQUESTS -->
        <div class="table-card mb-4">
            <h5 class="fw-bold mb-3">Blood Requests</h5>
            <table class="table align-middle">
                <thead>
                <tr>
                    <th>Patient</th>
                    <th>Blood Group</th>
                    <th>Units</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="blood : ${bloodRequests}">
                    <td th:text="${blood.requesterName}"></td>
                    <td th:text="${blood.bloodGroup}"></td>
                    <td th:text="${blood.units}"></td>
                    <td>
                        <span    th:text="${blood.status}"
                                 th:classappend="
                                            ${blood.status == 'APPROVED'} ? 'badge badge-approved' :
                                            (${blood.status == 'REJECTED'} ? 'badge badge-rejected' :'badge badge-pending')">
                        </span>
                    </td>
                    <td class="table-actions">
                        <button class="btn btn-sm btn-success" onclick="approveAction('Request')">Approve</button>
                        <button class="btn btn-sm btn-danger" onclick="rejectAction('Request')">Reject</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- BLOOD STOCK -->
        <div class="table-card">
            <h5 class="fw-bold mb-3">Blood Stock</h5>
            <table class="table">
                <thead>
                <tr>
                    <th>Blood Group</th>
                    <th>Units Available</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>O+</td>
                    <td>120</td>
                    <td><span class="badge badge-approved">Available</span></td>
                </tr>
                <tr>
                    <td>O-</td>
                    <td>2</td>
                    <td><span class="badge badge-rejected">Critical</span></td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>

<script src="/js/main.js"></script>
</body>
</html>
